<title>{{ title }}</title>

<link rel="stylesheet" href="/stylesheets/style.css"/>
<link rel="stylesheet" href="/bootstrap/dist/css/bootstrap.css"/>
<script src="//code.jquery.com/jquery-1.10.2.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script id="class-template" type="text/html">

    <form id="GC" method="put">
        <label for="Grades1">Grade:</label>
        <select id="Grades1" name="Grades1">
            <option value="A">A</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B">B</option>
            <option value="B-">B-</option>
            <option value="C+">C+</option>
            <option value="C">C</option>
            <option value="C-">C-</option>
            <option value="D+">D+</option>
            <option value="D">D</option>
            <option value="D-">D-</option>
            <option value="F">F</option>
        </select>
        <label for="Credits1">Credits:</label>
        <select id="Credits1" name="Credits1">
            <option value="0.0">0</option>
            <option value="1.0">1</option>
            <option value="2.0">2</option>
            <option value="3.0">3</option>
            <option value="4.0">4</option>
            <option value="5.0">5</option>
        </select><br />
        <label for="Grades2">Grade:</label>
        <select id="Grades2" name="Grades2">
            <option value="A">A</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B">B</option>
            <option value="B-">B-</option>
            <option value="C+">C+</option>
            <option value="C">C</option>
            <option value="C-">C-</option>
            <option value="D+">D+</option>
            <option value="D">D</option>
            <option value="D-">D-</option>
            <option value="F">F</option>
        </select>
        <label for="Credits2">Credits:</label>
        <select id="Credits2" name="Credits2">
            <option value="0.0">0</option>
            <option value="1.0">1</option>
            <option value="2.0">2</option>
            <option value="3.0">3</option>
            <option value="4.0">4</option>
            <option value="5.0">5</option>
        </select><br />
        <label for="Grades3">Grade:</label>
        <select id="Grades3" name="Grades3">
            <option value="A">A</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B">B</option>
            <option value="B-">B-</option>
            <option value="C+">C+</option>
            <option value="C">C</option>
            <option value="C-">C-</option>
            <option value="D+">D+</option>
            <option value="D">D</option>
            <option value="D-">D-</option>
            <option value="F">F</option>
        </select>
        <label for="Credits3">Credits:</label>
        <select id="Credits3" name="Credits3">
            <option value="0.0">0</option>
            <option value="1.0">1</option>
            <option value="2.0">2</option>
            <option value="3.0">3</option>
            <option value="4.0">4</option>
            <option value="5.0">5</option>
        </select><br />
        <label for="Grades4">Grade:</label>
        <select id="Grades4" name="Grades4">
            <option value="A">A</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B">B</option>
            <option value="B-">B-</option>
            <option value="C+">C+</option>
            <option value="C">C</option>
            <option value="C-">C-</option>
            <option value="D+">D+</option>
            <option value="D">D</option>
            <option value="D-">D-</option>
            <option value="F">F</option>
        </select>
        <label for="Credits4">Credits:</label>
        <select id="Credits4" name="Credits4">
            <option value="0.0">0</option>
            <option value="1.0">1</option>
            <option value="2.0">2</option>
            <option value="3.0">3</option>
            <option value="4.0">4</option>
            <option value="5.0">5</option>
        </select><br />
    </form>
        <button class="btn CalcGPA" value="Calculate GPA" name="Calculate GPA">Calculate GPA</button>
    <p id="paragraph">Your GPA is not available, add some classes.</p>
    <select id="dropdown" name="dropdown">
        <option value="GPA" selected="selected">GPA</option>
        <option value="Sections">Sections</option>

    </select>

</script>

<script id="section-template" type="text/html">
    <h2 id="<%= htmlId %>" <%= title %> </a>
        <button class="btn btn-default text-right pull-right edit">Edit</button>
    </h2>

    <p> Grade: <%= Grade %> Credit: <%= Credit %> </p>

</script>

<script id="section-edit-template" type="text/html">
    <h2 id="<%= htmlId %>"><a href="<%= link %>"><%= title %></a>
        <button class="btn btn-success text-right pull-right save">Save</button>
    </h2>
    <div>
    <form id="GC1" method="post" action="/gpaCalculator">
        <label for="G1">Grade:</label>
        <select id="G1" name="G1">
            <option value="A">A</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B">B</option>
            <option value="B-">B-</option>
            <option value="C+">C+</option>
            <option value="C">C</option>
            <option value="C-">C-</option>
            <option value="D+">D+</option>
            <option value="D">D</option>
            <option value="D-">D-</option>
            <option value="F">F</option>
        </select>
        <label for="C1">Credits:</label>
        <select id="C1" name="C1">
            <option value="0.0">0</option>
            <option value="1.0">1</option>
            <option value="2.0">2</option>
            <option value="3.0">3</option>
            <option value="4.0">4</option>
            <option value="5.0">5</option>
        </select><br />
        </form>
        </div>
</script>

<script id="gpa-template" type="text/html">
    <h2 id="<%= htmlId %>"  class="fixlink"><%= title %>
        <!-- <button class="btn btn-default text-right pull-right edit">Edit</button> -->
    </h2>

    <p><%= body %></p>

</script>

<script id="gpa-edit-template" type="text/html">
    <h2 id="<%= htmlId %>"><%= title %>
        <!-- <button class="btn btn-success text-right pull-right save">Save</button> -->
    </h2>

    <div id="calculator">
        <form id="GC1" method="post" action="/gpaCalculator">
            <label for="G1">Grade:</label>
            <select id="G1" name="G1">
                <option value="A">A</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B">B</option>
                <option value="B-">B-</option>
                <option value="C+">C+</option>
                <option value="C">C</option>
                <option value="C-">C-</option>
                <option value="D+">D+</option>
                <option value="D">D</option>
                <option value="D-">D-</option>
                <option value="F">F</option>
            </select>
            <label for="C1">Credits:</label>
            <select id="C1" name="C1">
                <option value="0.0">0</option>
                <option value="1.0">1</option>
                <option value="2.0">2</option>
                <option value="3.0">3</option>
                <option value="4.0">4</option>
                <option value="5.0">5</option>
            </select><br />
            <label for="G2">Grade:</label>
            <select id="G2" name="G2">
                <option value="A">A</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B">B</option>
                <option value="B-">B-</option>
                <option value="C+">C+</option>
                <option value="C">C</option>
                <option value="C-">C-</option>
                <option value="D+">D+</option>
                <option value="D">D</option>
                <option value="D-">D-</option>
                <option value="F">F</option>
            </select>
            <label for="C2">Credits:</label>
            <select id="C2" name="C2">
                <option value="0.0">0</option>
                <option value="1.0">1</option>
                <option value="2.0">2</option>
                <option value="3.0">3</option>
                <option value="4.0">4</option>
                <option value="5.0">5</option>
            </select><br />
            <label for="G3">Grade:</label>
            <select id="G3" name="G3">
                <option value="A">A</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B">B</option>
                <option value="B-">B-</option>
                <option value="C+">C+</option>
                <option value="C">C</option>
                <option value="C-">C-</option>
                <option value="D+">D+</option>
                <option value="D">D</option>
                <option value="D-">D-</option>
                <option value="F">F</option>
            </select>
            <label for="C3">Credits:</label>
            <select id="C3" name="C3">
                <option value="0.0">0</option>
                <option value="1.0">1</option>
                <option value="2.0">2</option>
                <option value="3.0">3</option>
                <option value="4.0">4</option>
                <option value="5.0">5</option>
            </select><br />
            <label for="G4">Grade:</label>
            <select id="G4" name="G4">
                <option value="A">A</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B">B</option>
                <option value="B-">B-</option>
                <option value="C+">C+</option>
                <option value="C">C</option>
                <option value="C-">C-</option>
                <option value="D+">D+</option>
                <option value="D">D</option>
                <option value="D-">D-</option>
                <option value="F">F</option>
            </select>
            <label for="C4">Credits:</label>
            <select id="C4" name="C4">
                <option value="0.0">0</option>
                <option value="1.0">1</option>
                <option value="2.0">2</option>
                <option value="3.0">3</option>
                <option value="4.0">4</option>
                <option value="5.0">5</option>
            </select><br />

    </div>

</script>

<script>
    calculateNumGrade = function(grade) {
        switch (grade) {
            case "A":
                return 4.0;
            case "A-":
                return 3.66;
            case "B+":
                return 3.33;
            case "B":
                return 3.0;
            case "B-":
                return 2.66;
            case "C+":
                return 2.33;
            case "C":
                return 2.0;
            case "C-":
                return 1.66;
            case "D+":
                return 1.33;
            case "D":
                return 1.0;
            case "D-":
                return 0.66;
            default:
                return 0;
        }
    };

    arrayMaker = function() {
        var inputs;
        inputs = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
        return inputs;
    };

    sumArray = function(array) {
        var number, sum, _i, _len;
        sum = 0;
        for (_i = 0, _len = array.length; _i < _len; _i++) {
            number = array[_i];
            sum += parseFloat(number);
        }
        return sum;
    };

    calculateGPA = function(gradeArray, creditArray) {
        var gradeCredit, i, sum, _i, _ref;
        sum = sumArray(creditArray);
        gradeCredit = 0;
        for (i = _i = 0, _ref = creditArray.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
            gradeCredit += creditArray[i] * calculateNumGrade(gradeArray[i]);
        }
        if (sum !== 0) {
            return (gradeCredit / sum).toFixed(2);
        } else {
            return "not available, add some classes.";
        }
    };


    $(document).ready(function(){
        $('#content').hide()
        $('#dropdown').change(function() {
            if (document.getElementById("dropdown").value == 'GPA') {
                $('#content').hide()
                $('#contentGPA').show()
            } else {
                $('#contentGPA').hide()
                $('#content').show()
            }
        })

        $('#CalcGPA').click(function() {
            var gradeArray = [document.getElementById('Grades1').value, document.getElementById('Grades2').value, document.getElementById('Grades3').value, document.getElementById('Grades4').value]
            var creditArray = [document.getElementById('Credits1').value,document.getElementById('Credits2').value,document.getElementById('Credits3').value,document.getElementById('Credits4').value]
            var finalGpa = calculateGPA(gradeArray,creditArray)
            var bodyString = "Grades: " + gradeArray + " Credits: " + creditArray + ". Your GPA is " + finalGpa
            document.getElementById('paragraph').innerHTML = "Your GPA is " + finalGpa
            gpa = new GPA({
                title: 'Gpa Form',
                Grade: gradeArray,
                Credit: creditArray,
                finalGPA: finalGpa,
                body: bodyString})
            gpa.save()
        })
    })
</script>